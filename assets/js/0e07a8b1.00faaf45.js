"use strict";(self.webpackChunkotiv_simulator_doc=self.webpackChunkotiv_simulator_doc||[]).push([[8765],{1452:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var s=t(4848),o=t(8453);const i={id:"Python",title:"Python",sidebar_label:"Python"},r="Python",c={id:"Airsim/Python",title:"Python",description:"This document covers the Python integration in Airsim.",source:"@site/docs/Airsim/Python.md",sourceDirName:"Airsim",slug:"/Airsim/Python",permalink:"/otivSimulator/docs/Airsim/Python",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Airsim/Python.md",tags:[],version:"current",frontMatter:{id:"Python",title:"Python",sidebar_label:"Python"},sidebar:"documentationSidebar",previous:{title:"Instance Segmentation",permalink:"/otivSimulator/docs/Airsim/InstanceSegmentation"},next:{title:"Vehicles",permalink:"/otivSimulator/docs/TrafficPlugin/Vehicles"}},a={},l=[{value:"Useful API Functions",id:"useful-api-functions",level:2},{value:"Connection Component",id:"connection-component",level:2},{value:"AirPythonConnecter Component",id:"airpythonconnecter-component",level:3},{value:"Configuration Example",id:"configuration-example",level:3},{value:"Python Functions",id:"python-functions",level:3}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"python",children:"Python"}),"\n",(0,s.jsx)(n.p,{children:"This document covers the Python integration in Airsim."}),"\n",(0,s.jsx)(n.h2,{id:"useful-api-functions",children:"Useful API Functions"}),"\n",(0,s.jsx)(n.p,{children:"Airsim provides a variety of useful API functions to interact with the simulator using Python. Here are a few key functions:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"client = airsim.CarClient()"})}),": Receives Airsim API client to use command on."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"client.confirmConnection()"})}),": Makes sure an connection has been set between Unreal Engine and the python API."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"client.getRecordingFolder()"})}),": Receives the folder where data will be stored."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"client.simPause(True/False)"})}),": Pauses or unpauses the simulation."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Refer to the ",(0,s.jsx)(n.a,{href:"https://microsoft.github.io/AirSim/apis/",children:"Airsim Python API documentation"})," for a comprehensive list of available functions."]}),"\n",(0,s.jsx)(n.h2,{id:"connection-component",children:"Connection Component"}),"\n",(0,s.jsx)(n.p,{children:"Airsim allows you to connect your Unreal Engine project to their Python API. To achieve this, you need to send a success message to Python so that it knows when the simulator is ready to connect. This involves adding an actor component to one actor, preferably the player character (tram). You can configure this component with the desired settings."}),"\n",(0,s.jsx)(n.h3,{id:"airpythonconnecter-component",children:"AirPythonConnecter Component"}),"\n",(0,s.jsxs)(n.p,{children:["The component you need to add is called the ",(0,s.jsx)(n.code,{children:"AirPythonConnecter"}),". This component sets up a UDP connection for Python to receive. You can configure the different network settings on the component:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Repeat"}),": It is recommended to leave this set to ",(0,s.jsx)(n.code,{children:"true"}),". This ensures the component continuously sends success messages, allowing the connection to be reestablished if lost."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Networking"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"UDPListen Port"}),": The port Unreal Engine will use to listen for messages from Python."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"UDPSend Port"}),": The port Unreal Engine will use to send messages to Python."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SuccesMessage"}),": The message that will be sent once the Unreal Engine project is ready to connect to Python."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IPString"}),": The IP address that will be used to send the message."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"configuration-example",children:"Configuration Example"}),"\n",(0,s.jsxs)(n.p,{children:["When configuring the ",(0,s.jsx)(n.code,{children:"AirPythonConnecter"})," component, be aware that changes to these settings may also require changes in your Python setup. The ",(0,s.jsx)(n.code,{children:"UDPListen/Send"})," ports are crucial for the communication between Unreal Engine and Python. The ",(0,s.jsx)(n.code,{children:"SuccesMessage"})," ensures Python knows when the simulator is ready. The ",(0,s.jsx)(n.code,{children:"IPString"})," defines the target IP address for the connection."]}),"\n",(0,s.jsx)(n.p,{children:"Example configuration in Unreal Engine:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-plaintext",children:'Repeat: true\r\nUDPListen Port: 999\r\nUDPSend Port: 9988\r\nSuccesMessage: "LOAD_SUCCES"\r\nIPString: "127.0.0.1"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"python-functions",children:"Python Functions"}),"\n",(0,s.jsx)(n.p,{children:"To manage the connection between Python and Unreal Engine, you can use the following functions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import socket\r\n\r\ndef send_to_unreal(message, ipAddress, port):\r\n    try:\r\n        with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as s:  # SOCK_DGRAM for UDP\r\n            s.sendto(message.encode(), (ipAddress, port))\r\n    except:\r\n        print("Unable to send message to Unreal. Ensure Unreal is listening.")\r\n\r\ndef receive_from_unreal(event, succesMessage, ipAddress, port):\r\n    with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as server_socket:\r\n        server_socket.bind((ipAddress, port))  # Binding to another port for receiving\r\n        while True:\r\n            message, address = server_socket.recvfrom(1024)\r\n            decodedMessage = message.decode() # decode byte string\r\n            if decodedMessage == succesMessage:\r\n                event.set()\r\n            else:\r\n                print(f"Received message from UE: {decodedMessage}")\n'})}),"\n",(0,s.jsxs)(n.p,{children:["In Python, you have two functions related to the connection: ",(0,s.jsx)(n.code,{children:"send_to_unreal"})," and ",(0,s.jsx)(n.code,{children:"receive_from_unreal"}),". Both functions need access to the ipAddress and their respective ports, so ensure these are the same as those set in Unreal Engine. The ",(0,s.jsx)(n.code,{children:"receive_from_unreal"})," function also needs to have the succesMessage, which must match the message in Unreal Engine for proper recognition."]}),"\n",(0,s.jsx)(n.p,{children:"By following these steps and configurations, you can effectively set up and maintain a connection between your Unreal Engine project and the Airsim Python API."})]})}function d(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>c});var s=t(6540);const o={},i=s.createContext(o);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);